# 补天漏洞提交助手 - 浏览器插件版

[![Chrome Web Store](https://img.shields.io/badge/Chrome-Extension-green.svg)](https://chrome.google.com/webstore)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Version](https://img.shields.io/badge/Version-1.0.0-orange.svg)](https://github.com/your-username/butian-helper-extension)

> 🚀 专为补天平台设计的漏洞提交助手，支持一键识别、自动填充、智能模板等功能，大幅提升漏洞提交效率。

## ✨ 功能特点

### 🎯 核心功能
- **🔍 URL自动识别**：输入漏洞URL，自动识别厂商名称、域名、地区信息
- **📝 智能模板**：7种常用漏洞类型模板，自动填充标题、描述、修复方案
- **🌍 地区查询**：使用高德API自动查询厂商所在地区，支持直辖市智能处理
- **⚡ 一键应用**：自动识别并直接应用到补天平台表单
- **🎨 简洁界面**：优化后的用户界面，操作简单直观

### 🛡️ 漏洞类型支持
| 漏洞类型 | 自动模板 | 专业修复建议 |
|---------|---------|-------------|
| XSS | ✅ | CSP策略、输入过滤、输出编码 |
| SQL注入 | ✅ | 参数化查询、权限控制、代码审计 |
| 命令执行 | ✅ | 命令白名单、参数过滤、沙箱隔离 |
| 逻辑漏洞 | ✅ | 业务验证、权限控制、多重验证 |
| 信息泄露 | ✅ | 访问控制、数据加密、日志监控 |
| 文件上传 | ✅ | 类型限制、安全扫描、存储隔离 |
| 弱口令 | ✅ | 强密码策略、多因素认证、定期更换 |

## 🚀 快速开始

### 安装插件

#### 方法一：开发者模式安装（推荐）

1. **下载项目**
   ```bash
   git clone https://github.com/3223892355/HeiNu001_BTFZ.git
   cd butian-helper-extension
   ```

2. **打开Chrome扩展管理**
   - 地址栏输入：`chrome://extensions/`
   - 或：菜单 → 更多工具 → 扩展程序

3. **开启开发者模式**
   - 点击右上角"开发者模式"开关
   - 开启后显示"加载已解压的扩展程序"按钮

4. **加载插件**
   - 点击"加载已解压的扩展程序"
   - 选择项目文件夹
   - 点击"选择文件夹"

5. **安装完成**
   - 插件出现在扩展程序列表中
   - 浏览器工具栏显示插件图标

#### 方法二：打包安装

1. **打包扩展程序**
   - 在扩展程序页面点击"打包扩展程序"
   - 选择项目文件夹
   - 点击"打包扩展程序"

2. **安装.crx文件**
   - 将生成的.crx文件拖拽到扩展程序页面
   - 确认安装

## 📖 使用指南

### 基本使用流程

1. **访问补天平台**
   - 打开补天漏洞提交页面
   - 确保页面URL包含 `/Loo/submit`

2. **打开插件**
   - 点击浏览器工具栏中的插件图标
   - 弹出配置面板

3. **一键识别**
   - 在"URL自动识别"区域输入漏洞URL
   - 点击"自动识别并填充"按钮
   - 插件自动完成：识别→填充→应用

### 详细操作步骤

#### 🔍 URL自动识别

1. **输入URL**
   ```
   示例：https://www.example.com/admin/login.php
   ```

2. **点击识别**
   - 点击"自动识别并填充"按钮
   - 插件自动执行以下步骤：
     - 解析URL获取域名
     - 查询厂商信息（爱站网、站长之家等）
     - 查询地区信息（高德API）
     - 生成漏洞标题
     - 填充表单字段
     - 应用到补天平台

3. **查看结果**
   - 成功：显示"识别并应用完成！厂商：XXX"
   - 失败：显示具体错误信息

#### 📝 漏洞类型模板

1. **选择漏洞类型**
   - 从7种常用类型中选择
   - 支持：XSS、SQL注入、命令执行、逻辑漏洞、信息泄露、文件上传、弱口令

2. **自动填充**
   - 选择后自动填充：
     - 漏洞标题
     - 漏洞描述
     - 修复方案（4条专业建议）

3. **手动调整**
   - 可根据实际情况修改内容
   - 支持实时预览

#### ⚙️ 配置选项

- **漏洞权重**：默认"权重≥1"，可调整为"权重=0"
- **参与活动**：可选择参与的活动（可选）
- **厂商信息**：自动识别或手动填写
- **地区信息**：自动查询，支持直辖市智能处理

## 🔧 技术特性

### 架构设计
- **Manifest V3**：使用最新的浏览器插件标准
- **Service Worker**：后台服务处理网络请求
- **Content Script**：页面内容脚本处理表单填充
- **Storage API**：本地存储配置信息

### 查询机制
- **多源查询**：爱站网、站长之家、备案查询网站
- **智能解析**：多种选择器和正则表达式
- **预热机制**：先访问查询网站建立会话
- **降级策略**：XHR查询 → Tab查询 → 域名推断

### 地区处理
- **API查询**：使用高德API查询公司地址
- **直辖市处理**：智能处理北京、上海、重庆、天津
- **格式统一**：统一为"省份/城市/区县"格式

## 📁 项目结构

```
butian-helper-extension/
├── manifest.json          # 插件配置文件
├── popup.html            # 弹窗界面
├── popup.js              # 弹窗逻辑
├── background.js         # 后台服务脚本
├── content.js           # 内容脚本
├── content.css          # 样式文件
├── icons/               # 图标文件夹
│   └── icon.svg         # 插件图标
└── README.md           # 说明文档
```

## 🔐 权限说明

插件需要以下权限：

- **activeTab**：访问当前活动标签页
- **storage**：本地存储配置信息
- **scripting**：注入脚本到页面
- **host_permissions**：访问补天平台和查询网站

## 🌐 兼容性

- ✅ **Chrome 88+**
- ✅ **Edge 88+**
- ❌ **Firefox**（需要修改manifest.json）

## ⚠️ 注意事项

### 使用要求
1. **网络连接**：需要访问爱站网、站长之家、高德API
2. **页面要求**：仅在补天平台提交页面生效
3. **权限确认**：首次使用时需要确认插件权限

### 常见问题

#### Q: 厂商查询失败？
A: 可能是网络问题或网站反爬虫机制，可以：
- 检查网络连接
- 尝试手动填写厂商名称
- 查看浏览器控制台日志

#### Q: 表单填充不完整？
A: 确保：
- 页面完全加载后再使用插件
- 检查页面结构是否发生变化
- 某些字段可能需要手动调整

#### Q: 插件无法加载？
A: 检查：
- 文件是否完整
- manifest.json格式是否正确
- 浏览器控制台错误信息

## 🚀 更新日志

### v1.0.0 (2024-01-XX)
- ✨ 初始版本发布
- 🔍 支持URL自动识别
- 📝 支持7种漏洞类型模板
- 🌍 支持地区自动查询
- ⚡ 支持一键应用配置
- 🎨 优化用户界面

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

### 开发环境设置
1. Fork项目
2. 创建功能分支
3. 提交更改
4. 创建Pull Request

### 代码规范
- 使用ES6+语法
- 遵循Chrome扩展开发规范
- 添加适当的注释
- 保持代码简洁

## 📄 许可证

本项目采用 [MIT License](LICENSE) 许可证。

## 📞 联系方式

如有问题或建议，请通过以下方式联系：

- 🐛 **Bug报告**：[GitHub Issues](https://github.com/your-username/butian-helper-extension/issues)
- 💡 **功能建议**：[GitHub Discussions](https://github.com/your-username/butian-helper-extension/discussions)
- 📧 **邮箱**：your-email@example.com

## 🙏 致谢

感谢以下开源项目和服务：
- [Chrome Extensions API](https://developer.chrome.com/docs/extensions/)
- [高德地图API](https://lbs.amap.com/)
- [爱站网](https://www.aizhan.com/)
- [站长之家](https://www.chinaz.com/)

---

**⭐ 如果这个项目对你有帮助，请给个Star支持一下！**

**🎉 祝您使用愉快！**
